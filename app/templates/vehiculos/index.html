<!DOCTYPE html>
{% extends "vehiculos/base.html" %}

{% block title %}Gesti√≥n de Veh√≠culos{% endblock %}

{% block content %}
<div class="page-header">
    <div class="header-content">
        <h1>üöó Inventario de Veh√≠culos</h1>
        <p class="text-muted">Gestiona la flota de veh√≠culos registrados en el taller.</p>
    </div>
    <div class="header-actions">
        <a href="/vehiculos/create" class="btn btn-primary">+ Nuevo Veh√≠culo</a>
    </div>
</div>

<!-- Barra de Herramientas (B√∫squeda y Filtros) -->
<div class="toolbar">
    <div class="search-box">
        <input type="text" placeholder="Buscar por placa, marca o cliente..." class="form-control search-input">
        <button class="btn btn-secondary">Buscar</button>
    </div>
</div>

<!-- Contenedor de Tabla -->
<div class="table-container">
    <table class="data-table">
        <thead>
        <tr>
            <th>ID</th>
            <th>Placa</th>
            <th>Marca / Modelo</th>
            <th>Color</th>
            <th>A√±o</th>
            <th class="text-center">Acciones</th>
        </tr>
        </thead>
        <tbody id="vehiculos-body">
        <!-- Ejemplo de fila (Esto se deber√≠a llenar din√°micamente con Jinja o JS) -->
        <!-- Si est√°s usando Jinja pasando una variable 'vehiculos': -->
        {% if vehiculos %}
        {% for v in vehiculos %}
        <tr>
            <td>#{{ v.id_vehiculo }}</td>
            <td><span class="badge badge-placa">{{ v.placa }}</span></td>
            <td>
                <div class="vehicle-info">
                    <strong>{{ v.marca }}</strong>
                    <small>{{ v.modelo }}</small>
                </div>
            </td>
            <td>
                <span class="color-dot" style="background-color: {{ v.color|default('#ccc') }};"></span>
                {{ v.color }}
            </td>
            <td>{{ v.anio }}</td>
            <td class="text-center actions-cell">
                <a href="/vehiculos/{{ v.id_vehiculo }}" class="btn-icon" title="Ver Detalles">üëÅÔ∏è</a>
                <a href="/vehiculos/update?id={{ v.id_vehiculo }}" class="btn-icon edit" title="Editar">‚úèÔ∏è</a>
                <button onclick="deleteVehiculo({{ v.id_vehiculo }})" class="btn-icon delete" title="Eliminar">üóëÔ∏è</button>
            </td>
        </tr>
        {% endfor %}
        {% else %}
        <tr>
            <td colspan="6" class="empty-state">
                No hay veh√≠culos registrados. <a href="/vehiculos/create">¬°Registra el primero!</a>
            </td>
        </tr>
        {% endif %}
        </tbody>
    </table>
</div>

<script>
    // Script simple para manejar eliminaci√≥n (ejemplo)
    async function deleteVehiculo(id) {
        if(confirm('¬øEst√°s seguro de eliminar este veh√≠culo?')) {
            try {
                const response = await fetch(`/vehiculos/${id}`, { method: 'DELETE' });
                if(response.ok) {
                    window.location.reload();
                } else {
                    alert('Error al eliminar');
                }
            } catch (e) {
                console.error(e);
                alert('Error de conexi√≥n');
            }
        }
    }
</script>
{% endblock %}<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inicio - Taller de Latoner√≠a</title>
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>

    <!-- NAVBAR r -->
    <nav class="navbar">
        <a href="/">Inicio</a>

        <div class="dropdown">
            <button class="dropbtn">Veh√≠culos</button>
            <div class="dropdown-content">
                <a href="/vehiculos">Ver Veh√≠culos</a>
                <a href="/vehiculos/create">Registrar Veh√≠culo</a>
                <a href="/vehiculos/update">Actualizar Veh√≠culo</a>
                <a href="/vehiculos/delete">Eliminar Veh√≠culo</a>
            </div>
        </div>

        <div class="dropdown">
            <button class="dropbtn">Clientes</button>
            <div class="dropdown-content">
                <a href="/clientes">Ver Clientes</a>
                <a href="/clientes/create">Crear Cliente</a>
                <a href="/clientes/update">Actualizar Cliente</a>
                <a href="/clientes/delete">Eliminar Cliente</a>
            </div>
        </div>

        <a href="/historial">Historial</a>
        <a href="/informacion">Informaci√≥n</a>
    </nav>

    {% include 'vehiculos/sidebar.html' %}

    <div class="container">
        <h1>Bienvenido al <strong>Taller de Latoner√≠a</strong></h1>

        <p>Este sistema permite gestionar veh√≠culos, clientes y procesos de reparaci√≥n de forma eficiente.</p>

        <h2>¬øQu√© puede hacer este sistema?</h2>
        <ul>
            <li><strong>Veh√≠culos:</strong> Registrar autos, actualizar informaci√≥n y gestionar reparaciones.</li>
            <li><strong>Clientes:</strong> Registrar clientes, actualizar datos y ver historial.</li>
            <li><strong>Historial:</strong> Visualizar y consultar operaciones realizadas.</li>
        </ul>

        <h2>Objetivo del proyecto</h2>
        <p>Este sistema fue desarrollado como parte del proyecto acad√©mico para la materia <strong>Desarrollo de Software</strong>.</p>

        <p>Utiliza el men√∫ lateral o la barra superior para navegar entre las secciones.</p>
    </div>

    <script>
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('sidebar-overlay');
            const body = document.body;

            sidebar.classList.toggle('open');
            overlay.classList.toggle('active');
            body.classList.toggle('sidebar-open');
        }

        function toggleSubmenu(element) {
            element.classList.toggle('active');
            const submenu = element.nextElementSibling;
            if (submenu.style.maxHeight) {
                submenu.style.maxHeight = null;
            } else {
                submenu.style.maxHeight = submenu.scrollHeight + "px";
            }
        }

        document.addEventListener('click', function(event) {
            const sidebar = document.getElementById('sidebar');
            const hamburger = document.querySelector('.hamburger-btn');
            const overlay = document.getElementById('sidebar-overlay');

            if (!sidebar.contains(event.target) &&
                !hamburger.contains(event.target) &&
                sidebar.classList.contains('open')) {
                toggleSidebar();
            }
        });
    </script>
</body>
</html>
